# 管理员修改待办功能说明

## 功能概述

新增了管理员专用的待办事项修改功能，允许管理员对系统中的任何待办事项进行全面的编辑和管理。

## 主要特性

### 1. 后端API增强
- **新增API接口**: `PUT /api/todo/admin/update`
- **专用DTO**: `AdminTodoUpdateDto` 支持完整的待办信息修改
- **权限验证**: 严格的管理员权限检查
- **智能通知**: 自动向相关人员发送修改通知

### 2. 前端功能增强
- **专用编辑界面**: 管理员专用的编辑对话框
- **全字段编辑**: 支持修改标题、描述、状态、优先级、分配人、时间等所有字段
- **修改原因**: 可选填写修改原因，增强操作可追溯性
- **操作权限**: 仅管理员可见和使用该功能

### 3. 通知系统
- **分配人通知**: 向当前分配人发送任务修改通知
- **重新分配通知**: 向原分配人发送任务重新分配通知
- **项目通知**: 向项目成员发送项目任务修改通知
- **详细描述**: 通知包含具体的修改内容和原因

## 使用方式

### 在待办看板页面
1. 点击待办卡片右上角的更多操作按钮
2. 选择"管理员编辑"选项
3. 在弹出的对话框中编辑待办信息
4. 可选填写修改原因
5. 点击确认完成修改

### 在项目详情页面
1. 在待办事项列表的操作列中
2. 点击"管理员编辑"按钮
3. 在专用编辑对话框中修改信息
4. 支持修改所有字段包括状态和分配人
5. 保存后自动刷新列表

## 权限控制
- 仅有管理员权限（`auth === 'admin'`）的用户可以看到和使用此功能
- 后端接口严格验证用户权限，非管理员请求将被拒绝
- 前端界面根据用户权限动态显示相关按钮

## 技术实现

### 后端
- `AdminTodoUpdateDto`: 专用的数据传输对象
- `TodoController.adminUpdateTodo()`: 新增的控制器方法
- `TodoServiceImpl.adminUpdateTodo()`: 业务逻辑实现
- 完整的通知发送机制

### 前端
- 新增`adminUpdateTodo` API调用
- `isAdminEditing`状态控制编辑模式
- 专用的表单字段和验证逻辑
- 响应式的UI交互

## 安全考虑
- 严格的权限验证
- 操作日志和通知机制
- 数据完整性保护
- 错误处理和回滚机制 